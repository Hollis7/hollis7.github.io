---
title: 牛客论坛项目-帖子详情
categories:
- nowcoder
tags:
- core_function
- nowcoder
---
<meta name="referrer" content="no-referrer"/>

## 内容

**本节包括：**

- 帖子详情展示

<!--more-->

## 添加帖子详情查询服务

### 续写DiscussPostMapper

~~~java
DiscussPost selectDiscussPostById(int id);
~~~

### 续写discusspost-mapper.xml

~~~java
<select id="selectDiscussPostById" resultType="com.hdb.community.entity.DiscussPost">
    select
    <include refid="selectFields"></include>
    from discuss_post
    where id = #{id}
</select>
~~~

### 续写DiscussPostService

~~~java
public DiscussPost findDiscussPostById(int id) {
    return discussPostMapper.selectDiscussPostById(id);
}
~~~

### 续写DiscussPostController

~~~java
@Autowired
private UserService userService;

@RequestMapping(path = "/detail/{discussPostId}", method = RequestMethod.GET)
public String getDiscussPost(@PathVariable("discussPostId") int discussPostId, Model model) {
    // 帖子
    DiscussPost post = discussPostService.findDiscussPostById(discussPostId);
    model.addAttribute("post", post);

    // 作者
    User user = userService.findUserById(post.getUserId());
    model.addAttribute("user", user);

    return "/site/discuss-detail";

}
~~~

### 改写index.html-帖子列表

~~~java
<a th:href="@{|/discuss/detail/${map.post.id}|}" th:utext="${map.post.title}">备战春招，面试刷题跟他复习，一个月全搞定！</a>
~~~

超链接中含有变量，需要加`|...|`,`|/discuss/detail/${map.post.id}|`

### 修改discuss-detail.html

~~~html
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<link rel="stylesheet" th:href="@{/css/global.css}" />
<link rel="stylesheet" th:href="@{/css/discuss-detail.css}" />
<script th:src="@{/js/global.js}"></script>
<header class="bg-dark sticky-top" th:replace="index::header">
~~~

~~~html
<span th:utext="${post.title}">备战春招，面试刷题跟他复习，一个月全搞定！</span>
<img th:src="${user.headerUrl}" class="align-self-start mr-4 rounded-circle user-header" alt="用户头像" >
<div class="mt-0 text-warning" th:utext="${user.username}">寒江雪</div>
发布于 <b th:text="${#dates.format(post.createTime,'yyyy-MM-dd HH:mm:ss')}">2019-04-15 15:32:18</b>
<div class="mt-4 mb-3 content" th:utext="${post.content}">
~~~

